<div class="errors">
	<p class="alert alert-error" ng-repeat="error in errors">{{error}}</p>
</div>

<div class="filter-bar">
	<a href="#/new" ng-show="modelInfo.permissions.create" class="btn btn-success">
		<i class="icon-plus icon-white"></i> {{modelInfo.proper_name}}
	</a>
	<div class="input-prepend">
		<span class="add-on"><i class="icon-search"></i></span>
		<input class="input-large" id="prependedInput" type="text" placeholder="Search" ng-model="query" ng-change="loadModels()" />
	</div>
	<select ng-model="limit" ng-change="loadModels()" class="input-mini">
		<option value="10">10</option>
		<option value="25">25</option>
		<option value="50">50</option>
		<option value="100">100</option>
	</select>
</div>

<div ng-hide="noModels()">
	<div class="models-holder">
		<table class="table table-striped" id="models-table">
			<thead>
				<tr class="title-bar">
					<th></th>
					<th ng-repeat="property in modelInfo.properties">
						{{property.title}}
						<button class="btn-link" ng-class="{'sort-none':sortDirection(property)==0,'sort-asc':sortDirection(property)==1,'sort-desc':sortDirection(property)==-1}" ng-click="toggleSort(property)">
							<b class="caret caret-1"></b>
							<b class="caret caret-2"></b>
						</button>
						<button class="btn-link" ng-hide="hasFilter[property.name]" ng-click="showFilter(property)">
							<i class="icon-filter icon-white"></i>
						</button>
						<div class="input-append" ng-show="hasFilter[property.name]">
							<input class="input-small" type="text" placeholder="Filter..." ng-model="filter[property.name]" />
							<button class="btn btn-success" type="button" ng-click="loadModels()">
								<i class="icon-ok icon-white"></i>
							</button>
							<button class="btn btn-danger" type="button" ng-click="hideFilter(property)">
								<i class="icon-remove icon-white"></i>
							</button>
						</div>
					</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="model in models">
					<td>
						<div class="btn-group" ng-show="model.id">
							<a href="#/{{model.id}}" class="btn">View</a>
							<button class="btn dropdown-toggle" data-toggle="dropdown">
								<span class="caret"></span>
							</button>
							<ul class="dropdown-menu">
								<li ng-show="modelInfo.permissions.edit">
									<a href="#/{{model.id}}/edit">
										<i class="icon-pencil"></i> Edit
									</a>
								</li>
								<li ng-show="modelInfo.permissions.delete">
									<a href="#" ng-click="deleteModelAsk(model)" eat-click>
										<i class="icon-remove"></i> Delete
									</a>
								</li>
							</ul>
						</div>
					</td>
					<td ng-repeat="property in modelInfo.properties" ng-bind-html-unsafe="model|modelValue:modelInfo.properties:property:true" ng-class="{nowrap:property.nowrap}"></td>
				</tr>
			</tbody>
		</table>
	</div>
		
	<div class="pagination pull-right" ng-show="page_count>1">
	    <ul>
		    <li ng-class="{disabled:page==1}">
		    	<a href="#" ng-click="prevPage()" eat-click>&larr;</a>
		    </li>
		    <li ng-repeat="p in currentPages(5)" ng-class="{active:page==p}">
		    	<a href="#" ng-click="goToPage(p)" eat-click>{{p}}</a>
		    </li>
		    <li ng-class="{disabled:page>=page_count}">
		    	<a href="#" ng-click="nextPage()" eat-click>&rarr;</a>
		    </li>
	    </ul>
	</div>
	
	<p ng-show="models.length>0">
		<br/>
		<strong>{{total_count}} {{modelInfo.proper_name_plural}}</strong><br/>
		<span ng-show="models.length>0">Showing <em>{{(page-1)*limit+1}}-{{((page-1)*limit)+models.length}}</em> of <em>{{filtered_count}}</em> found</span>
		<span ng-show="models.length==0"><em>None Found</em></span>
	</p>
</div>
<div class="no-results" ng-show="models.length==0&&!loading">
	Unable to find any {{modelInfo.proper_name_plural}}<span ng-show="query.length>0"> matching <strong>{{query}}</strong></span>.
</div>
<div class="loading" ng-show="loading">
	<img src="/img/ajax-loader.gif" />
</div>

<div modal="deleteModel" close="closeDeleteModal()" opts="dialogOptions">
	<div class="modal-header">
		<h3>Are you sure?</h3>
	</div>
	<div class="modal-body">
		<p>Are you sure you want to delete this {{modelInfo.proper_name}}?</p>
	</div>
	<div class="modal-footer">
		<button class="btn cancel" ng-click="closeDeleteModal()">No</button>
		<button class="btn btn-danger" ng-click="deleteModelConfirm()">Yes</button>
	</div>
</div>